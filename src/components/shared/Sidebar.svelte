<script>
	import Brand2 from "./Brand2.svelte"
	import AddBalanceModal from "../client/Billing/AddBalanceModal.svelte"

    import { onMount } from 'svelte'
	import { empty } from "$lib/helper/utils"
    import { showModal } from "$lib/helper/modal"
    import { beautifulToKebabCase } from "$lib/helper/strUtils"
    import { navigate, setcurrentRouteDisplay, currentRouteDisplay } from "$lib/router/router"

    export let client = {}
    export let lastOrder = {}

    let sidebar
    let minimizeBalance = false


    onMount(async () => {
        setcurrentRouteDisplay("Home")
    })

    const onClickNav = async (pageName) => {
        setcurrentRouteDisplay(pageName)
    }

    const reflectNavigationStyle = async (pageName) => {
        let kebabCase = beautifulToKebabCase(pageName)
        await navigate(kebabCase)

        let button = sidebar.querySelector("#" + kebabCase)
        if (empty(button)) return

        sidebar.querySelectorAll('button').forEach(btn => {
            if (btn.classList.contains('bg-secondary-800')) {
                btn.classList.add('bg-secondary-900')
                btn.classList.remove('bg-secondary-800')
                btn.querySelector('path').setAttribute('stroke', '#D0D5DD')
            }
        })

        button.classList.add('bg-secondary-800')
        button.classList.remove('bg-secondary-900')
        button.querySelector('path').setAttribute('stroke', '#fff')
    }

    const collapseBalance = () => {
        minimizeBalance = ! minimizeBalance
    }

    const slideSideBar = (e) => {
        let icon = e.target.closest('.absolute.z-40.top-8')
        icon.classList.toggle('right-3')
        icon.classList.toggle('border')
        icon.classList.toggle('rounded-l-full')
        sidebar.classList.toggle('-translate-x-[280px]')
    }

    $: reflectNavigationStyle($currentRouteDisplay.slugs[0])
</script>

<div bind:this={sidebar} class="fixed w-[280px] z-40 -translate-x-[280px] md:translate-x-0 flex items-start flex-shrink-0 bg-secondary-900 bg-[url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/1462889/pat.svg')] transition-all duration-500 ease-in-out">
    <button on:click={slideSideBar} class="absolute z-40 top-8 -right-9 block md:hidden py-2 px-4 bg-secondary-900 rounded-r-full">
        <i class="fa-solid fa-bars" style="color: white;"></i>
    </button>
    <div class="flex flex-col justify-between items-start flex-1 self-stretch w-4/5 lg:w-full h-screen overflow-y-auto">
        <div class="flex flex-col items-start self-stretch gap-6 pt-8">
            <div class="flex flex-col items-start self-stretch py-0 ps-6 pe-5">
                <Brand2 />
            </div>
            <div class="flex flex-col items-start self-stretch gap-1 py-0 px-4">

                <button id="home" on:click={() => onClickNav("Home")} class="flex items-center self-stretch gap-2 flex-1 group py-2 px-3 rounded-md bg-secondary-800 hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M8 17.0002H16M11.0177 2.76424L4.23539 8.03937C3.78202 8.39199 3.55534 8.5683 3.39203 8.7891C3.24737 8.98469 3.1396 9.20503 3.07403 9.4393C3 9.70376 3 9.99094 3 10.5653V17.8002C3 18.9203 3 19.4804 3.21799 19.9082C3.40973 20.2845 3.71569 20.5905 4.09202 20.7822C4.51984 21.0002 5.07989 21.0002 6.2 21.0002H17.8C18.9201 21.0002 19.4802 21.0002 19.908 20.7822C20.2843 20.5905 20.5903 20.2845 20.782 19.9082C21 19.4804 21 18.9203 21 17.8002V10.5653C21 9.99094 21 9.70376 20.926 9.4393C20.8604 9.20503 20.7526 8.98469 20.608 8.7891C20.4447 8.5683 20.218 8.39199 19.7646 8.03937L12.9823 2.76424C12.631 2.49099 12.4553 2.35436 12.2613 2.30184C12.0902 2.2555 11.9098 2.2555 11.7387 2.30184C11.5447 2.35436 11.369 2.49099 11.0177 2.76424Z" stroke="white" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Home</span>
                    </div>
                </button>

                <button id="reports" on:click={() => onClickNav("Reports")} class="flex items-center self-stretch gap-2 flex-1 group py-2 px-3 rounded-md bg-secondary-900 hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 16V21M12 16L18 21M12 16L6 21M21 3V11.2C21 12.8802 21 13.7202 20.673 14.362C20.3854 14.9265 19.9265 15.3854 19.362 15.673C18.7202 16 17.8802 16 16.2 16H7.8C6.11984 16 5.27976 16 4.63803 15.673C4.07354 15.3854 3.6146 14.9265 3.32698 14.362C3 13.7202 3 12.8802 3 11.2V3M8 9V12M12 7V12M16 11V12M22 3H2" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Reports</span>
                    </div>
                </button>

                <button id="scheduled-messages" on:click={() => onClickNav("Scheduled Messages")} class="flex items-center self-stretch gap-2 flex-1 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M22.7 11.5L20.7005 13.5L18.7 11.5M20.9451 13C20.9814 12.6717 21 12.338 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C14.8273 21 17.35 19.6963 19 17.6573M12 7V12L15 14" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Scheduled Messages</span>
                    </div>
                </button>

                <button id="groups" on:click={() => onClickNav("Groups")} class="flex items-center self-stretch gap-2 flex-1 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M22 21V19C22 17.1362 20.7252 15.5701 19 15.126M15.5 3.29076C16.9659 3.88415 18 5.32131 18 7C18 8.67869 16.9659 10.1159 15.5 10.7092M17 21C17 19.1362 17 18.2044 16.6955 17.4693C16.2895 16.4892 15.5108 15.7105 14.5307 15.3045C13.7956 15 12.8638 15 11 15H8C6.13623 15 5.20435 15 4.46927 15.3045C3.48915 15.7105 2.71046 16.4892 2.30448 17.4693C2 18.2044 2 19.1362 2 21M13.5 7C13.5 9.20914 11.7091 11 9.5 11C7.29086 11 5.5 9.20914 5.5 7C5.5 4.79086 7.29086 3 9.5 3C11.7091 3 13.5 4.79086 13.5 7Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Groups</span>
                    </div>
                </button>

                <button id="sms-templates" on:click={() => onClickNav("SMS Templates")} class="flex items-center self-stretch gap-2 flex-1 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M7.5 12H7.51M12 12H12.01M16.5 12H16.51M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 13.1971 3.23374 14.3397 3.65806 15.3845C3.73927 15.5845 3.77988 15.6845 3.798 15.7653C3.81572 15.8443 3.8222 15.9028 3.82221 15.9839C3.82222 16.0667 3.80718 16.1569 3.77711 16.3374L3.18413 19.8952C3.12203 20.2678 3.09098 20.4541 3.14876 20.5888C3.19933 20.7067 3.29328 20.8007 3.41118 20.8512C3.54589 20.909 3.73218 20.878 4.10476 20.8159L7.66265 20.2229C7.84309 20.1928 7.9333 20.1778 8.01613 20.1778C8.09715 20.1778 8.15566 20.1843 8.23472 20.202C8.31554 20.2201 8.41552 20.2607 8.61549 20.3419C9.6603 20.7663 10.8029 21 12 21ZM8 12C8 12.2761 7.77614 12.5 7.5 12.5C7.22386 12.5 7 12.2761 7 12C7 11.7239 7.22386 11.5 7.5 11.5C7.77614 11.5 8 11.7239 8 12ZM12.5 12C12.5 12.2761 12.2761 12.5 12 12.5C11.7239 12.5 11.5 12.2761 11.5 12C11.5 11.7239 11.7239 11.5 12 11.5C12.2761 11.5 12.5 11.7239 12.5 12ZM17 12C17 12.2761 16.7761 12.5 16.5 12.5C16.2239 12.5 16 12.2761 16 12C16 11.7239 16.2239 11.5 16.5 11.5C16.7761 11.5 17 11.7239 17 12Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">SMS Templates</span>
                    </div>
                </button>

                <button id="senders" on:click={() => onClickNav("Senders")} class="flex items-center self-stretch gap-2 flex-1 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12.0005 18.9998V11.9998M12.292 19.0845L19.2704 21.4207C19.8173 21.6038 20.0908 21.6953 20.2594 21.6296C20.4059 21.5726 20.517 21.45 20.5594 21.2987C20.6082 21.1244 20.4903 20.8613 20.2545 20.3349L12.766 3.6222C12.5354 3.1075 12.4201 2.85015 12.2594 2.77041C12.1199 2.70113 11.956 2.70087 11.8162 2.7697C11.6553 2.84892 11.5392 3.1059 11.3069 3.61986L3.75244 20.3359C3.51474 20.8619 3.39589 21.1248 3.44422 21.2993C3.48619 21.4508 3.59697 21.5737 3.74329 21.6312C3.91178 21.6974 4.18567 21.6064 4.73346 21.4246L11.786 19.0838C11.8799 19.0527 11.9268 19.0371 11.9749 19.0309C12.0175 19.0255 12.0606 19.0255 12.1032 19.0311C12.1512 19.0374 12.1981 19.0531 12.292 19.0845Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Senders</span>
                    </div>
                </button>

                <button id="documents" on:click={() => onClickNav("Documents")} class="flex items-center self-stretch gap-2 flex-1 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M20.5 8V16.2C20.5 17.8802 20.5 18.7202 20.173 19.362C19.8854 19.9265 19.4265 20.3854 18.862 20.673C18.2202 21 17.3802 21 15.7 21H8.3C6.61984 21 5.77976 21 5.13803 20.673C4.57354 20.3854 4.1146 19.9265 3.82698 19.362C3.5 18.7202 3.5 17.8802 3.5 16.2V8M3.6 3H20.4C20.9601 3 21.2401 3 21.454 3.10899C21.6422 3.20487 21.7951 3.35785 21.891 3.54601C22 3.75992 22 4.03995 22 4.6V6.4C22 6.96005 22 7.24008 21.891 7.45399C21.7951 7.64215 21.6422 7.79513 21.454 7.89101C21.2401 8 20.9601 8 20.4 8H3.6C3.03995 8 2.75992 8 2.54601 7.89101C2.35785 7.79513 2.20487 7.64215 2.10899 7.45399C2 7.24008 2 6.96005 2 6.4V4.6C2 4.03995 2 3.75992 2.10899 3.54601C2.20487 3.35785 2.35785 3.20487 2.54601 3.10899C2.75992 3 3.03995 3 3.6 3ZM9.6 11.5H14.4C14.9601 11.5 15.2401 11.5 15.454 11.609C15.6422 11.7049 15.7951 11.8578 15.891 12.046C16 12.2599 16 12.5399 16 13.1V13.9C16 14.4601 16 14.7401 15.891 14.954C15.7951 15.1422 15.6422 15.2951 15.454 15.391C15.2401 15.5 14.9601 15.5 14.4 15.5H9.6C9.03995 15.5 8.75992 15.5 8.54601 15.391C8.35785 15.2951 8.20487 15.1422 8.10899 14.954C8 14.7401 8 14.4601 8 13.9V13.1C8 12.5399 8 12.2599 8.10899 12.046C8.20487 11.8578 8.35785 11.7049 8.54601 11.609C8.75992 11.5 9.03995 11.5 9.6 11.5Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Documents</span>
                    </div>
                </button>
            </div>
        </div>
        <div class="flex flex-col items-start self-stretch gap-6 pt-0 pb-8 px-4">
            <div class="flex flex-col items-start self-stretch gap-1">

                <button id="api" on:click={() => onClickNav("API")} class="flex items-center self-stretch gap-2 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M17 17L22 12L17 7M7 7L2 12L7 17M14 3L10 21" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">API</span>
                    </div>
                </button>

                <button id="support" on:click={() => onClickNav("Support")} class="flex items-center self-stretch gap-2 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M9.13626 9.13628L4.92893 4.92896M4.92893 19.0711L9.16797 14.8321M14.8611 14.8638L19.0684 19.0711M19.0684 4.92896L14.8287 9.16862M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Support</span>
                    </div>
                </button>

                <button id="billings-history" on:click={() => onClickNav("Billings History")} class="flex items-center self-stretch gap-2 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M22 8.5H2M2 12.5H5.54668C6.08687 12.5 6.35696 12.5 6.61813 12.5466C6.84995 12.5879 7.0761 12.6563 7.29191 12.7506C7.53504 12.8567 7.75977 13.0065 8.20924 13.3062L8.79076 13.6938C9.24023 13.9935 9.46496 14.1433 9.70809 14.2494C9.9239 14.3437 10.15 14.4121 10.3819 14.4534C10.643 14.5 10.9131 14.5 11.4533 14.5H12.5467C13.0869 14.5 13.357 14.5 13.6181 14.4534C13.85 14.4121 14.0761 14.3437 14.2919 14.2494C14.535 14.1433 14.7598 13.9935 15.2092 13.6938L15.7908 13.3062C16.2402 13.0065 16.465 12.8567 16.7081 12.7506C16.9239 12.6563 17.15 12.5879 17.3819 12.5466C17.643 12.5 17.9131 12.5 18.4533 12.5H22M2 7.2L2 16.8C2 17.9201 2 18.4802 2.21799 18.908C2.40973 19.2843 2.71569 19.5903 3.09202 19.782C3.51984 20 4.07989 20 5.2 20L18.8 20C19.9201 20 20.4802 20 20.908 19.782C21.2843 19.5903 21.5903 19.2843 21.782 18.908C22 18.4802 22 17.9201 22 16.8V7.2C22 6.0799 22 5.51984 21.782 5.09202C21.5903 4.7157 21.2843 4.40974 20.908 4.21799C20.4802 4 19.9201 4 18.8 4L5.2 4C4.0799 4 3.51984 4 3.09202 4.21799C2.7157 4.40973 2.40973 4.71569 2.21799 5.09202C2 5.51984 2 6.07989 2 7.2Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Billings History</span>
                    </div>
                </button>

                <button id="settings" on:click={() => onClickNav("Settings")} class="flex items-center self-stretch gap-2 group py-2 px-3 rounded-md bg-secondary-900  hover:bg-secondary-800">
                    <div class="flex items-center flex-1 gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M18.7273 14.7273C18.6063 15.0015 18.5702 15.3056 18.6236 15.6005C18.6771 15.8954 18.8177 16.1676 19.0273 16.3818L19.0818 16.4364C19.2509 16.6052 19.385 16.8057 19.4765 17.0265C19.568 17.2472 19.6151 17.4838 19.6151 17.7227C19.6151 17.9617 19.568 18.1983 19.4765 18.419C19.385 18.6397 19.2509 18.8402 19.0818 19.0091C18.913 19.1781 18.7124 19.3122 18.4917 19.4037C18.271 19.4952 18.0344 19.5423 17.7955 19.5423C17.5565 19.5423 17.3199 19.4952 17.0992 19.4037C16.8785 19.3122 16.678 19.1781 16.5091 19.0091L16.4545 18.9545C16.2403 18.745 15.9682 18.6044 15.6733 18.5509C15.3784 18.4974 15.0742 18.5335 14.8 18.6545C14.5311 18.7698 14.3018 18.9611 14.1403 19.205C13.9788 19.4489 13.8921 19.7347 13.8909 20.0273V20.1818C13.8909 20.664 13.6994 21.1265 13.3584 21.4675C13.0174 21.8084 12.5549 22 12.0727 22C11.5905 22 11.1281 21.8084 10.7871 21.4675C10.4461 21.1265 10.2545 20.664 10.2545 20.1818V20.1C10.2475 19.7991 10.1501 19.5073 9.97501 19.2625C9.79991 19.0176 9.55521 18.8312 9.27273 18.7273C8.99853 18.6063 8.69437 18.5702 8.39947 18.6236C8.10456 18.6771 7.83244 18.8177 7.61818 19.0273L7.56364 19.0818C7.39478 19.2509 7.19425 19.385 6.97353 19.4765C6.7528 19.568 6.51621 19.6151 6.27727 19.6151C6.03834 19.6151 5.80174 19.568 5.58102 19.4765C5.36029 19.385 5.15977 19.2509 4.99091 19.0818C4.82186 18.913 4.68775 18.7124 4.59626 18.4917C4.50476 18.271 4.45766 18.0344 4.45766 17.7955C4.45766 17.5565 4.50476 17.3199 4.59626 17.0992C4.68775 16.8785 4.82186 16.678 4.99091 16.5091L5.04545 16.4545C5.25503 16.2403 5.39562 15.9682 5.4491 15.6733C5.50257 15.3784 5.46647 15.0742 5.34545 14.8C5.23022 14.5311 5.03887 14.3018 4.79497 14.1403C4.55107 13.9788 4.26526 13.8921 3.97273 13.8909H3.81818C3.33597 13.8909 2.87351 13.6994 2.53253 13.3584C2.19156 13.0174 2 12.5549 2 12.0727C2 11.5905 2.19156 11.1281 2.53253 10.7871C2.87351 10.4461 3.33597 10.2545 3.81818 10.2545H3.9C4.2009 10.2475 4.49273 10.1501 4.73754 9.97501C4.98236 9.79991 5.16883 9.55521 5.27273 9.27273C5.39374 8.99853 5.42984 8.69437 5.37637 8.39947C5.3229 8.10456 5.18231 7.83244 4.97273 7.61818L4.91818 7.56364C4.74913 7.39478 4.61503 7.19425 4.52353 6.97353C4.43203 6.7528 4.38493 6.51621 4.38493 6.27727C4.38493 6.03834 4.43203 5.80174 4.52353 5.58102C4.61503 5.36029 4.74913 5.15977 4.91818 4.99091C5.08704 4.82186 5.28757 4.68775 5.50829 4.59626C5.72901 4.50476 5.96561 4.45766 6.20455 4.45766C6.44348 4.45766 6.68008 4.50476 6.9008 4.59626C7.12152 4.68775 7.32205 4.82186 7.49091 4.99091L7.54545 5.04545C7.75971 5.25503 8.03183 5.39562 8.32674 5.4491C8.62164 5.50257 8.9258 5.46647 9.2 5.34545H9.27273C9.54161 5.23022 9.77093 5.03887 9.93245 4.79497C10.094 4.55107 10.1807 4.26526 10.1818 3.97273V3.81818C10.1818 3.33597 10.3734 2.87351 10.7144 2.53253C11.0553 2.19156 11.5178 2 12 2C12.4822 2 12.9447 2.19156 13.2856 2.53253C13.6266 2.87351 13.8182 3.33597 13.8182 3.81818V3.9C13.8193 4.19253 13.906 4.47834 14.0676 4.72224C14.2291 4.96614 14.4584 5.15749 14.7273 5.27273C15.0015 5.39374 15.3056 5.42984 15.6005 5.37637C15.8954 5.3229 16.1676 5.18231 16.3818 4.97273L16.4364 4.91818C16.6052 4.74913 16.8057 4.61503 17.0265 4.52353C17.2472 4.43203 17.4838 4.38493 17.7227 4.38493C17.9617 4.38493 18.1983 4.43203 18.419 4.52353C18.6397 4.61503 18.8402 4.74913 19.0091 4.91818C19.1781 5.08704 19.3122 5.28757 19.4037 5.50829C19.4952 5.72901 19.5423 5.96561 19.5423 6.20455C19.5423 6.44348 19.4952 6.68008 19.4037 6.9008C19.3122 7.12152 19.1781 7.32205 19.0091 7.49091L18.9545 7.54545C18.745 7.75971 18.6044 8.03183 18.5509 8.32674C18.4974 8.62164 18.5335 8.9258 18.6545 9.2V9.27273C18.7698 9.54161 18.9611 9.77093 19.205 9.93245C19.4489 10.094 19.7347 10.1807 20.0273 10.1818H20.1818C20.664 10.1818 21.1265 10.3734 21.4675 10.7144C21.8084 11.0553 22 11.5178 22 12C22 12.4822 21.8084 12.9447 21.4675 13.2856C21.1265 13.6266 20.664 13.8182 20.1818 13.8182H20.1C19.8075 13.8193 19.5217 13.906 19.2778 14.0676C19.0339 14.2291 18.8425 14.4584 18.7273 14.7273Z" stroke="#D0D5DD" class="group-hover:stroke-white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="text-white font-medium text-start text-wrap">Settings</span>
                    </div>
                </button>
            </div>

            <div class="overflow-hidden w-full rounded-lg transition-all duration-1000 ease-in-out {minimizeBalance ? "h-16" : "h-full"}">
                <div class="relative flex justify-end items-end self-stretch gap-4 py-5 px-4 rounded-lg bg-secondary-800">
                    <div class="flex flex-col items-start flex-1 gap-2">
                        <button on:click={collapseBalance}><span class="self-stretch text-white text-xs 2xl:text-sm me-6 lg:me-0 font-medium">Available Balance</span></button>
                        {#if ! minimizeBalance}
                        <div class="flex flex-col justify-center items-start self-stretch gap-2 mt-1.5">
                            <div class="flex flex-col items-start self-stretch gap-1">
                                <div class="flex items-center self-stretch gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                        <path d="M9.75 3.75C9.75 4.57843 7.90317 5.25 5.625 5.25C3.34683 5.25 1.5 4.57843 1.5 3.75M9.75 3.75C9.75 2.92157 7.90317 2.25 5.625 2.25C3.34683 2.25 1.5 2.92157 1.5 3.75M9.75 3.75V4.875M1.5 3.75V12.75C1.5 13.5784 3.34683 14.25 5.625 14.25M5.625 8.25C5.49859 8.25 5.37351 8.24793 5.25 8.24388C3.14756 8.17499 1.5 7.53246 1.5 6.75M5.625 11.25C3.34683 11.25 1.5 10.5784 1.5 9.75M16.5 8.625C16.5 9.45343 14.6532 10.125 12.375 10.125C10.0968 10.125 8.25 9.45343 8.25 8.625M16.5 8.625C16.5 7.79657 14.6532 7.125 12.375 7.125C10.0968 7.125 8.25 7.79657 8.25 8.625M16.5 8.625V14.25C16.5 15.0784 14.6532 15.75 12.375 15.75C10.0968 15.75 8.25 15.0784 8.25 14.25V8.625M16.5 11.4375C16.5 12.2659 14.6532 12.9375 12.375 12.9375C10.0968 12.9375 8.25 12.2659 8.25 11.4375" stroke="#ACDC3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <span class="text-white font-medium text-base text-start text-wrap">{client?.balance ?? "0.0"} LE</span>
                                </div>
                                <div class="flex items-center self-stretch gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                        <path d="M5.625 7.875H5.6325M9 7.875H9.0075M12.375 7.875H12.3825M5.25 13.5V15.2516C5.25 15.6513 5.25 15.8511 5.33192 15.9537C5.40317 16.043 5.5112 16.0949 5.6254 16.0948C5.75672 16.0946 5.91275 15.9698 6.22482 15.7201L8.01391 14.2889C8.37939 13.9965 8.56213 13.8503 8.76561 13.7463C8.94615 13.6541 9.13832 13.5867 9.33691 13.5459C9.56075 13.5 9.79477 13.5 10.2628 13.5H12.15C13.4101 13.5 14.0402 13.5 14.5215 13.2548C14.9448 13.039 15.289 12.6948 15.5048 12.2715C15.75 11.7902 15.75 11.1601 15.75 9.9V5.85C15.75 4.58988 15.75 3.95982 15.5048 3.47852C15.289 3.05516 14.9448 2.71095 14.5215 2.49524C14.0402 2.25 13.4101 2.25 12.15 2.25H5.85C4.58988 2.25 3.95982 2.25 3.47852 2.49524C3.05516 2.71095 2.71095 3.05516 2.49524 3.47852C2.25 3.95982 2.25 4.58988 2.25 5.85V10.5C2.25 11.1975 2.25 11.5462 2.32667 11.8323C2.53472 12.6088 3.1412 13.2153 3.91766 13.4233C4.20378 13.5 4.55252 13.5 5.25 13.5ZM6 7.875C6 8.08211 5.83211 8.25 5.625 8.25C5.41789 8.25 5.25 8.08211 5.25 7.875C5.25 7.66789 5.41789 7.5 5.625 7.5C5.83211 7.5 6 7.66789 6 7.875ZM9.375 7.875C9.375 8.08211 9.20711 8.25 9 8.25C8.79289 8.25 8.625 8.08211 8.625 7.875C8.625 7.66789 8.79289 7.5 9 7.5C9.20711 7.5 9.375 7.66789 9.375 7.875ZM12.75 7.875C12.75 8.08211 12.5821 8.25 12.375 8.25C12.1679 8.25 12 8.08211 12 7.875C12 7.66789 12.1679 7.5 12.375 7.5C12.5821 7.5 12.75 7.66789 12.75 7.875Z" stroke="#ACDC3F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    <span class="text-white font-medium text-base text-start text-wrap">{lastOrder?.number_of_messages ?? "0.0"} SMS</span>
                                </div>
                            </div>
                            <button on:click={() => showModal(AddBalanceModal)} class="flex justify-center items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M9.99984 4.1665V15.8332M4.1665 9.99984H15.8332" stroke="#ACDC3F" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <span class="text-primary-400 font-medium text-base">Add Balance</span>
                            </button>
                        </div>
                        {/if}
                    </div>

                    {#if ! minimizeBalance}
                    <svg xmlns="http://www.w3.org/2000/svg" width="58" height="72" viewBox="0 0 58 72" fill="none">
                        <path d="M16.3283 59.8681L14.2146 70.1659C14.1125 70.6969 14.2317 71.0192 14.4701 71.1747L8.47176 67.6726C8.23145 67.536 8.09521 67.1947 8.19739 66.6657L10.328 56.3679C10.4643 55.6664 10.294 55.1203 9.91931 54.8984L15.9176 58.4006C16.3112 58.6224 16.4645 59.1685 16.3283 59.8681Z" fill="#8DC220"/>
                        <path d="M14.5108 71.942C14.3632 71.9418 14.2183 71.9026 14.0907 71.8283L8.09051 68.328C7.53798 68.0114 7.29956 67.3364 7.45662 66.5229L9.58914 56.2119C9.67429 55.7663 9.55887 55.5691 9.53238 55.5482C9.36054 55.4463 9.23611 55.2803 9.18643 55.0865C9.13676 54.8927 9.1659 54.6871 9.26747 54.5148C9.31736 54.4289 9.38368 54.3536 9.46263 54.2934C9.54157 54.2331 9.6316 54.189 9.72755 54.1637C9.82351 54.1383 9.92351 54.1322 10.0218 54.1456C10.1202 54.159 10.2149 54.1917 10.3006 54.2418L16.299 57.7439C16.9821 58.1307 17.2716 58.9802 17.071 60.0136L17.0691 60.0193L14.9574 70.3189C14.9157 70.5275 14.9441 70.6072 14.9441 70.6072C15.2904 70.8309 15.3642 71.2537 15.1485 71.6064C15.0799 71.7125 14.9852 71.7992 14.8735 71.858C14.7618 71.9167 14.6369 71.9457 14.5108 71.942ZM11.084 56.4546L11.0726 56.5114L8.94012 66.8187C8.91599 66.9111 8.9134 67.0077 8.93254 67.1012L13.5287 69.7539L15.5856 59.7197C15.6745 59.2684 15.5705 59.075 15.5477 59.0579L11.084 56.4546Z" fill="black"/>
                        <path d="M51.7405 5.81625C47.1746 3.16738 40.2037 3.81775 32.3964 8.34377C18.7118 16.2506 7.6499 33.0558 7.68396 45.8641C7.70289 51.3818 9.76352 55.2404 13.2055 57.2559L7.1882 53.7557C3.76328 51.7572 1.70076 47.8796 1.68563 42.3638C1.65157 29.5537 12.7116 12.7655 26.398 4.84165C34.2034 0.315626 41.1744 -0.332846 45.7252 2.33119L51.7405 5.81625Z" fill="#8DC220"/>
                        <path d="M32.4049 8.33624C46.1045 0.410482 57.2119 4.38853 57.2478 17.193C57.2838 30.0107 46.2351 46.8065 32.5354 54.7322C29.8031 56.3136 27.1691 57.4247 24.7073 58.0827C24.5678 58.1239 24.4338 58.1819 24.3081 58.2552C23.9216 58.4914 23.5936 58.8123 23.3487 59.1938L15.8707 70.4605C15.6701 70.7601 15.4468 70.9725 15.2273 71.0976C14.5991 71.4617 14.022 71.1166 14.2131 70.1647L16.3324 59.865C16.4932 59.0687 16.251 58.4562 15.7382 58.314C10.8071 56.9109 7.7114 52.6162 7.69248 45.8622C7.65464 33.0578 18.7147 16.2563 32.4049 8.33624Z" fill="white"/>
                        <path d="M57.2351 17.1951C57.2729 30.0128 46.2224 46.8124 32.5227 54.7381C29.7979 56.3119 27.1677 57.4306 24.7078 58.0753C24.5754 58.1132 24.4429 58.1891 24.3105 58.2649C23.9509 58.4545 23.6103 58.7769 23.3454 59.194L15.8712 70.4569C15.663 70.7603 15.4359 70.9689 15.2278 71.1016C14.6034 71.4619 14.0168 71.1206 14.206 70.1725L16.3253 59.8577C16.4956 59.0613 16.2496 58.4545 15.7387 58.3218C15.3791 58.2216 15.0253 58.1013 14.6791 57.9615C22.5318 57.0135 30.6683 53.4298 37.5749 47.2674C51.1421 35.1702 55.3996 17.1572 48.4552 4.58594C53.8102 5.72361 57.2162 10.1036 57.2351 17.1951Z" fill="#E9EDF4"/>
                        <path d="M13.2103 58.0177C13.0766 58.0175 12.9453 57.9815 12.83 57.9134L6.81275 54.4113C3.03777 52.2099 0.946864 47.9323 0.931727 42.3672C0.895774 29.3447 12.1526 12.219 26.0226 4.18515C33.8053 -0.323813 41.1225 -1.23774 46.1123 1.67848L52.122 5.15975C52.2959 5.26032 52.4228 5.426 52.4747 5.62033C52.5267 5.81466 52.4995 6.02173 52.3992 6.19597C52.2988 6.37022 52.1335 6.49738 51.9395 6.54947C51.7456 6.60157 51.539 6.57433 51.3651 6.47375L51.3613 6.47186C46.8389 3.84953 40.0647 4.77484 32.7797 9.00128C19.3279 16.7753 8.41167 33.3095 8.44573 45.8636C8.45898 50.9263 10.2396 54.6388 13.5926 56.6013C13.7377 56.6847 13.8512 56.8139 13.9153 56.9688C13.9794 57.1237 13.9904 57.2954 13.9468 57.4573C13.9031 57.6191 13.8071 57.7619 13.6739 57.8633C13.5407 57.9647 13.3776 58.019 13.2103 58.0177ZM39.4025 1.50973C35.6824 1.50973 31.334 2.85597 26.7795 5.49915C13.3258 13.2903 2.41144 29.8263 2.4455 42.3634C2.46064 47.4393 4.23554 51.1519 7.57342 53.1011L8.78633 53.8064C7.56963 51.6619 6.93763 48.9903 6.93007 45.8674C6.89601 32.8297 18.1528 15.7021 32.0209 7.68727C37.1375 4.72175 42.0667 3.31293 46.2618 3.51582L45.3497 2.99059C43.6581 1.99893 41.6428 1.50973 39.4025 1.50973Z" fill="black"/>
                        <path d="M14.7532 71.9998C14.4791 72.0026 14.2112 71.9176 13.9887 71.7571C13.7598 71.5922 13.2508 71.0916 13.4703 70.0165L15.5877 59.713C15.6728 59.2902 15.5725 59.0702 15.5366 59.0456C10.0851 57.4965 6.95156 52.6936 6.93075 45.8676C6.8948 32.8356 18.1516 15.708 32.0216 7.67985C39.7797 3.19365 47.0893 2.26645 52.0772 5.13906C55.8806 7.33476 57.9847 11.6162 57.9999 17.1927C58.0377 30.2303 46.7828 47.3655 32.9109 55.3918C30.1824 56.9712 27.4859 58.1241 24.9012 58.8161C24.8255 58.8392 24.753 58.8717 24.6855 58.9128C24.3982 59.0911 24.1549 59.3322 23.974 59.6182L16.4997 70.8811C16.2405 71.266 15.932 71.5656 15.6028 71.7571C15.3458 71.9115 15.0528 71.9952 14.7532 71.9998ZM45.4223 5.00633C41.6984 5.00633 37.3406 6.35447 32.7804 8.99575C19.3267 16.7774 8.40858 33.3172 8.44642 45.8619C8.46534 52.0527 11.1239 56.2147 15.9415 57.5856C16.8573 57.8396 17.3134 58.818 17.0693 60.0164L14.95 70.3199L14.9424 70.3654C15.0601 70.2746 15.1607 70.1635 15.2395 70.0374L22.7138 58.7744C23.0525 58.2682 23.4707 57.8643 23.9286 57.5988C24.1083 57.4946 24.2975 57.4111 24.4924 57.3561C26.9656 56.6925 29.539 55.5928 32.154 54.0759C45.6077 46.2942 56.5221 29.7506 56.4861 17.1964C56.4729 12.1111 54.6866 8.39658 51.3203 6.45496C49.6401 5.48795 47.6438 5.00633 45.4223 5.00633Z" fill="black"/>
                        <path d="M20.9264 32.4887C21.9974 31.8668 22.9719 31.4894 23.8404 31.3548C24.1167 31.3131 24.2511 31.4591 24.2529 31.7947C24.2466 31.9988 24.1914 32.1985 24.0921 32.3768C23.9997 32.5696 23.853 32.7311 23.6701 32.8414C23.5973 32.8793 23.5174 32.9019 23.4355 32.9077C22.6018 33.073 21.8028 33.3816 21.074 33.8197C20.3508 34.2247 19.7123 34.7655 19.1931 35.4125C18.7144 36.0306 18.4741 36.6431 18.4741 37.2517C18.476 37.6537 18.5914 37.9154 18.8204 38.0386C19.0493 38.1581 19.3389 38.1903 19.6851 38.1277C20.0333 38.0708 20.5064 37.9438 21.1024 37.758C21.8725 37.5248 22.4989 37.3769 22.9719 37.3162C23.1839 37.2813 23.4007 37.2891 23.6096 37.3392C23.8186 37.3894 24.0154 37.4808 24.1886 37.6082C24.5292 37.8642 24.6995 38.3742 24.6995 39.1364C24.7033 39.7679 24.5481 40.4258 24.2359 41.1046C23.9051 41.8165 23.4609 42.4697 22.9208 43.0387C22.3532 43.6492 21.7022 44.1668 20.9605 44.5954C19.7192 45.314 18.5574 45.7141 17.4693 45.8051C17.4155 45.8102 17.3612 45.8032 17.3104 45.7845C17.2597 45.7657 17.2137 45.7359 17.176 45.697C17.0929 45.6012 17.0501 45.4768 17.0568 45.35C17.0568 45.1604 17.1136 44.9613 17.2271 44.7565C17.3236 44.5646 17.4726 44.4041 17.6567 44.2939C17.7414 44.2416 17.8375 44.2104 17.9367 44.2029C18.8336 44.1441 19.7968 43.8161 20.8242 43.2207C22.531 42.2347 23.3844 41.0932 23.3787 39.8001C23.3787 39.4645 23.2709 39.2445 23.0476 39.1478C22.7887 39.0458 22.5051 39.0247 22.2339 39.0872C21.7702 39.1751 21.3111 39.2858 20.8583 39.419C20.0636 39.6408 19.424 39.783 18.9377 39.8437C18.4457 39.912 18.0238 39.8247 17.6737 39.5858C17.3199 39.3526 17.1439 38.8691 17.142 38.1391C17.1506 37.4497 17.2987 36.7692 17.5772 36.1387C17.8667 35.4466 18.2962 34.7811 18.8677 34.1402C19.4628 33.4844 20.1576 32.927 20.9264 32.4887ZM37.0803 23.2224C37.3452 23.0707 37.5723 23.0517 37.7577 23.1617C37.9432 23.2755 38.0378 23.484 38.0378 23.7855L38.0661 33.8539C38.0621 34.0843 37.9968 34.3095 37.8769 34.5061C37.7664 34.7068 37.6052 34.8748 37.4096 34.9934C37.2222 35.1034 37.0633 35.1205 36.9327 35.0522C36.8003 34.9821 36.734 34.838 36.7321 34.6256L36.7056 25.0445L33.3488 36.6336C33.2732 36.8952 33.1483 37.1379 32.978 37.3655C32.8272 37.5759 32.6345 37.7528 32.4122 37.885C32.2463 37.9958 32.0461 38.0429 31.8483 38.0177C31.7659 38.0036 31.6884 37.969 31.623 37.9169C31.5575 37.8649 31.5061 37.7972 31.4737 37.7201L28.0658 30.0427L28.0923 39.6256C28.0868 39.8581 28.0188 40.0848 27.8955 40.2817C27.7808 40.4839 27.6167 40.6535 27.4186 40.7747C27.2332 40.8809 27.0761 40.8979 26.9513 40.8278C26.8226 40.7538 26.7582 40.6097 26.7582 40.3974L26.7299 30.329C26.7368 29.9941 26.8321 29.667 27.0061 29.3809C27.1622 29.0857 27.3941 28.8376 27.6779 28.6623L28.1623 28.3836C28.3572 28.2698 28.535 28.2376 28.6959 28.2793C28.8586 28.321 28.9797 28.4177 29.0573 28.5732L32.4065 36.1975L35.7084 24.726C35.7841 24.4795 35.9052 24.2444 36.068 24.0149C36.2054 23.8066 36.3869 23.6311 36.5997 23.5011L37.0803 23.2224ZM44.0985 19.0813C45.1733 18.4593 46.144 18.0839 47.0163 17.9474C47.2888 17.9057 47.427 18.0517 47.4289 18.3873C47.4225 18.5914 47.3673 18.791 47.268 18.9694C47.1747 19.1633 47.0267 19.3254 46.8423 19.4358C46.77 19.4733 46.6907 19.4952 46.6095 19.5003C45.7766 19.6663 44.9784 19.9749 44.2499 20.4123C43.5266 20.817 42.8879 21.3578 42.3691 22.0051C41.8865 22.6251 41.6462 23.2375 41.6481 23.8443C41.6481 24.2463 41.7635 24.5098 41.9925 24.6331C42.2651 24.7575 42.5711 24.7882 42.8629 24.7203C43.2073 24.6634 43.6785 24.5383 44.2745 24.3525C45.0484 24.1173 45.671 23.9713 46.144 23.9088C46.619 23.8481 47.0239 23.9467 47.3645 24.2008C47.7013 24.4586 47.8716 24.9687 47.8735 25.7309C47.8735 26.3623 47.7221 27.0165 47.4118 27.6972C47.0996 28.3798 46.6606 29.0245 46.0929 29.6312C45.5214 30.2465 44.8605 30.7719 44.1326 31.1898C42.8913 31.9085 41.7295 32.3085 40.6452 32.3977C40.5911 32.4042 40.5363 32.3976 40.4852 32.3785C40.4342 32.3593 40.3885 32.3282 40.3519 32.2877C40.2706 32.208 40.2327 32.0886 40.2327 31.9426C40.2327 31.753 40.2857 31.5558 40.3993 31.3491C40.4968 31.1567 40.6471 30.9962 40.8326 30.8865C40.9291 30.8296 41.0218 30.8011 41.1088 30.7954C42.0095 30.7348 42.9727 30.4086 43.9964 29.8152C45.705 28.8273 46.5584 27.6858 46.5565 26.3927C46.5546 26.0552 46.443 25.8371 46.2235 25.7404C45.9643 25.6396 45.6811 25.6185 45.4098 25.6797C45.0863 25.7366 44.6246 25.8466 44.0285 26.0134C43.3996 26.1995 42.7585 26.3414 42.1098 26.4382C41.6711 26.5139 41.22 26.4219 40.8458 26.1803C40.4958 25.9452 40.316 25.4636 40.3141 24.7336C40.3122 24.0889 40.4579 23.4253 40.7493 22.7332C41.0388 22.0411 41.4721 21.3718 42.0417 20.7328C42.6359 20.0773 43.3301 19.5205 44.0985 19.0832V19.0813Z" fill="black"/>
                    </svg>
                    {/if}

                    <button on:click={collapseBalance} class="flex justify-center items-center p-2 absolute top-4 right-2 rounded-lg">
                        <svg class="{minimizeBalance && "rotate-90"}" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M5 7.5L10 12.5L15 7.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>